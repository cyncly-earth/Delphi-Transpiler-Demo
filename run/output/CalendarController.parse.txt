(file (unit (unitHead unit (namespaceName (ident CalendarController)) ;) (unitInterface interface (usesClause uses (namespaceNameList (namespaceName (ident classCalendarItem)) , (namespaceName (ident classBooking)) , (namespaceName (ident classEmailUser)) , (namespaceName (ident Misc)) , (namespaceName (ident ClientModuleUnit1)) , (namespaceName (ident Data) . (ident FireDACJSONReflect)) , (namespaceName (ident SysUtils)) , (namespaceName (ident FMX) . (ident Graphics)) , (namespaceName (ident Classes)) , (namespaceName (ident JSON)) , (namespaceName (ident Rest) . (ident Json)) ;)) (interfaceDecl (procDecl (procDeclHeading procedure (ident ItemClick) (formalParameterSection ( (formalParameterList (formalParameter (identListFlat (ident BookID)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident Integer))))))) ))) ;)) (interfaceDecl (procDecl (procDeclHeading procedure (ident UpdateCalendar) (formalParameterSection ( (formalParameterList (formalParameter (identListFlat (ident StartDate)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TDateTime)))))) ; (formalParameter (identListFlat (ident EndDate)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TDateTime))))))) ))) ;)) (interfaceDecl (procDecl (procDeclHeading procedure (ident EmailBitmap) (formalParameterSection ( (formalParameterList (formalParameter (identListFlat (ident Image)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TBitmap)))))) ; (formalParameter (identListFlat (ident Email)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident String)))))) ; (formalParameter (identListFlat (ident EmailUser)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TEmailUser)))))) ; (formalParameter (identListFlat (ident Body)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident String))))))) ))) ;))) (unitImplementation implementation (usesClause uses (namespaceNameList (namespaceName (ident DataController)) , (namespaceName (ident CalendarView)) , (namespaceName (ident BookingsTabController)) , (namespaceName (ident BookingsTabView)) ;)) (declSection (procDecl (procDeclHeading procedure (ident ItemClick) (formalParameterSection ( (formalParameterList (formalParameter (identListFlat (ident BookID)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident Integer))))))) ))) ; (procBody (block (declSection (varSection (varKey var) (varDeclaration (identListFlat (ident Booking)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TBooking))))) ;))) (blockBody (compoundStatement begin (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Booking)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (namespaceName (ident BookingsTabController)) . (qualifiedIdent (ident GetBookingByID))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident BookID))))))) )))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident BookingsTabView)) . (qualifiedIdent (ident SwitchToBookings)))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident BookingsTabController)) . (qualifiedIdent (ident SetEditBookingItem))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Booking))))))) ))))) ; (statement (simpleStatement designator))) end))) ;))) (declSection (procDecl (procDeclHeading procedure (ident UpdateCalendar) (formalParameterSection ( (formalParameterList (formalParameter (identListFlat (ident StartDate)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TDateTime)))))) ; (formalParameter (identListFlat (ident EndDate)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TDateTime))))))) ))) ; (procBody (block (declSection (varSection (varKey var) (varDeclaration (identListFlat (ident LDataSetList)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TFDJSONDataSets))))) ;) (varDeclaration (identListFlat (ident CalendarItem)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TCalendarItem))))) ;) (varDeclaration (identListFlat (ident ItemStart)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TDateTime))))) ;) (varDeclaration (identListFlat (ident ItemEnd)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TDateTime))))) ;))) (blockBody (compoundStatement begin (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident Module) . (ident mtCalendar)) . (qualifiedIdent (ident Close)))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident Module) . (ident mtCalendar)) . (qualifiedIdent (ident Open)))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident CalendarView)) . (qualifiedIdent (ident Clear)))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident LDataSetList)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (namespaceName (ident ClientModule1) . (ident ServerMethods1Client)) . (qualifiedIdent (ident Calendar))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident StartDate))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident EndDate))))))) )))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident Module) . (ident mtCalendar)) . (qualifiedIdent (ident AppendData))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (namespaceName (ident TFDJSONDataSetsReader)) . (qualifiedIdent (ident GetListValue))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident LDataSetList))))))) , (expression (simpleExpression (factor (intNum 0)))) )))))) ))))) ; (statement (withStatement with (withItem (designator (namespacedQualifiedIdent (namespaceName (ident Module)) . (qualifiedIdent (ident mtCalendar))))) do (statement (compoundStatement begin (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident First)))))) ; (statement (whileStatement while (expression (simpleExpression (factor not (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident EOF)))))))) do (statement (compoundStatement begin (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident ItemStart)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'StartDate')))) )) (designatorItem . (ident AsDateTime)))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident ReplaceTime))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident ItemStart))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident EncodeTime))) (designatorItem ( (expression (simpleExpression (factor (intNum 13)))) , (expression (simpleExpression (factor (intNum 1)))) , (expression (simpleExpression (factor (intNum 0)))) , (expression (simpleExpression (factor (intNum 0)))) )))))) ))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident ItemEnd)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'EndDate')))) )) (designatorItem . (ident AsDateTime)))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident ReplaceTime))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident ItemEnd))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident EncodeTime))) (designatorItem ( (expression (simpleExpression (factor (intNum 12)))) , (expression (simpleExpression (factor (intNum 59)))) , (expression (simpleExpression (factor (intNum 0)))) , (expression (simpleExpression (factor (intNum 0)))) )))))) ))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident CalendarItem)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (namespaceName (ident TCalendarItem)) . (qualifiedIdent (ident Create))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'BookID')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'RentID')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'AccomID')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IfNull))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'ClientID')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (intNum 0)))) )))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'Status')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IfNull))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'Outstanding')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (intNum 0)))) )))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident ItemStart))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident ItemEnd))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'AccomName')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IfNull))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'FirstName')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (stringFactor '')))) )))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IfNull))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'LastName')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (stringFactor '')))) )))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IfNull))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'Occupants')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (intNum 0)))) )))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IfNull))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident FieldByName))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'TravelInfo')))) )) (designatorItem . (ident Value)))))) , (expression (simpleExpression (factor (stringFactor '')))) )))))) )))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident CalendarView)) . (qualifiedIdent (ident AddItemToCalendar))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident CalendarItem))))))) ))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Next)))))) ; (statement (simpleStatement designator))) end)))) ; (statement (simpleStatement designator))) end)))) ; (statement (simpleStatement designator))) end))) ;))) (declSection (procDecl (procDeclHeading procedure (ident EmailBitmap) (formalParameterSection ( (formalParameterList (formalParameter (identListFlat (ident Image)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TBitmap)))))) ; (formalParameter (identListFlat (ident Email)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident String)))))) ; (formalParameter (identListFlat (ident EmailUser)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TEmailUser)))))) ; (formalParameter (identListFlat (ident Body)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident String))))))) ))) ; (procBody (block (declSection (varSection (varKey var) (varDeclaration (identListFlat (ident Success)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident Boolean))))) ;) (varDeclaration (identListFlat (ident Stream)) : (typeDecl (typeId (namespacedQualifiedIdent (qualifiedIdent (ident TMemoryStream))))) ;))) (blockBody (compoundStatement begin (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Success)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident False))))))))) ; (statement (ifStatement if (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident IsConnected))))))) then (statement (compoundStatement begin (statementList (statement (tryStatement try (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Stream)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (namespaceName (ident TMemoryStream)) . (qualifiedIdent (ident Create))))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident Image)) . (qualifiedIdent (ident SaveToStream))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Stream))))))) ))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Success)))) := (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (namespaceName (ident ClientModule1) . (ident ServerMethods1Client)) . (qualifiedIdent (ident EmailBitmap))) (designatorItem ( (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Stream))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Email))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident EmailUser))))))) , (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Body))))))) )))))))) ; (statement (simpleStatement designator))) finally (statementList (statement (ifStatement if (expression (simpleExpression (factor not (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Success)))))))) then (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Print))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'Error sending calendar.')))) ))))))) ; (statement (ifStatement if (expression (simpleExpression (factor (designator (namespacedQualifiedIdent (qualifiedIdent (ident Success))))))) then (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Print))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'Email Sent!')))) ))))))) ; (statement (simpleStatement (designator (namespacedQualifiedIdent (namespaceName (ident Image)) . (qualifiedIdent (ident Free)))))) ; (statement (simpleStatement designator))) end)) ; (statement (simpleStatement designator))) end)) else (statement (compoundStatement begin (statementList (statement (simpleStatement (designator (namespacedQualifiedIdent (qualifiedIdent (ident Print))) (designatorItem ( (expression (simpleExpression (factor (stringFactor 'Cannot connect to the server.')))) ))))) ; (statement (simpleStatement designator))) end)))) ; (statement (simpleStatement designator))) end))) ;)))) (unitBlock end) .))